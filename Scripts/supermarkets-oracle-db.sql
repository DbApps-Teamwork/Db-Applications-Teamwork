--------------------------------------------------------
--  File created - Saturday-July-18-2015   
--------------------------------------------------------
--------------------------------------------------------
--  DDL for Sequence MEASURES_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "SUPERMARKETS_CHAIN"."MEASURES_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence PRODUCTS_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "SUPERMARKETS_CHAIN"."PRODUCTS_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence PRODUCTS_SEQ1
--------------------------------------------------------

   CREATE SEQUENCE  "SUPERMARKETS_CHAIN"."PRODUCTS_SEQ1"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 41 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence VENDORS_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "SUPERMARKETS_CHAIN"."VENDORS_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 41 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Table MEASURES
--------------------------------------------------------

  CREATE TABLE "SUPERMARKETS_CHAIN"."MEASURES" 
   (  "ID" NUMBER(*,0), 
  "MEASURE_NAME" NVARCHAR2(50)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table PRODUCTS
--------------------------------------------------------

  CREATE TABLE "SUPERMARKETS_CHAIN"."PRODUCTS" 
   (  "ID" NUMBER(*,0), 
  "PRODUCT_NAME" NVARCHAR2(100), 
  "VENDOR_ID" NUMBER(*,0), 
  "MEASURE_ID" NUMBER(*,0), 
  "PRICE" NUMBER(10,4)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table VENDORS
--------------------------------------------------------

  CREATE TABLE "SUPERMARKETS_CHAIN"."VENDORS" 
   (  "ID" NUMBER(*,0), 
  "VENDOR_NAME" NVARCHAR2(100)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
REM INSERTING into SUPERMARKETS_CHAIN.MEASURES
SET DEFINE OFF;
Insert into SUPERMARKETS_CHAIN.MEASURES (ID,MEASURE_NAME) values (1,'liters');
Insert into SUPERMARKETS_CHAIN.MEASURES (ID,MEASURE_NAME) values (2,'pieces');
Insert into SUPERMARKETS_CHAIN.MEASURES (ID,MEASURE_NAME) values (3,'kg');
REM INSERTING into SUPERMARKETS_CHAIN.PRODUCTS
SET DEFINE OFF;
Insert into SUPERMARKETS_CHAIN.PRODUCTS (ID,PRODUCT_NAME,VENDOR_ID,MEASURE_ID,PRICE) values (6,'Chocolate “Milka”',1,2,2.8);
Insert into SUPERMARKETS_CHAIN.PRODUCTS (ID,PRODUCT_NAME,VENDOR_ID,MEASURE_ID,PRICE) values (2,'Beer “Zagorka”',2,1,0.86);
Insert into SUPERMARKETS_CHAIN.PRODUCTS (ID,PRODUCT_NAME,VENDOR_ID,MEASURE_ID,PRICE) values (3,'Vodka “Targovishte”',3,1,7.56);
Insert into SUPERMARKETS_CHAIN.PRODUCTS (ID,PRODUCT_NAME,VENDOR_ID,MEASURE_ID,PRICE) values (4,'Beer “Beck’s”',2,1,1.03);
Insert into SUPERMARKETS_CHAIN.PRODUCTS (ID,PRODUCT_NAME,VENDOR_ID,MEASURE_ID,PRICE) values (7,'Devin Min.Water 1.5L',4,2,0.74);
Insert into SUPERMARKETS_CHAIN.PRODUCTS (ID,PRODUCT_NAME,VENDOR_ID,MEASURE_ID,PRICE) values (8,'Devin Min.Water 0.5L',4,2,0.42);
Insert into SUPERMARKETS_CHAIN.PRODUCTS (ID,PRODUCT_NAME,VENDOR_ID,MEASURE_ID,PRICE) values (9,'Coca-Cola 0.33L',5,2,0.95);
Insert into SUPERMARKETS_CHAIN.PRODUCTS (ID,PRODUCT_NAME,VENDOR_ID,MEASURE_ID,PRICE) values (10,'Coca-Cola 0.5L',5,2,1.15);
Insert into SUPERMARKETS_CHAIN.PRODUCTS (ID,PRODUCT_NAME,VENDOR_ID,MEASURE_ID,PRICE) values (11,'Coca-Cola 2L',5,2,2.35);
Insert into SUPERMARKETS_CHAIN.PRODUCTS (ID,PRODUCT_NAME,VENDOR_ID,MEASURE_ID,PRICE) values (12,'Lacrima White Cheese ',6,2,4.55);
Insert into SUPERMARKETS_CHAIN.PRODUCTS (ID,PRODUCT_NAME,VENDOR_ID,MEASURE_ID,PRICE) values (13,'Lacrima Yellow Cheese',6,2,8.5);
REM INSERTING into SUPERMARKETS_CHAIN.VENDORS
SET DEFINE OFF;
Insert into SUPERMARKETS_CHAIN.VENDORS (ID,VENDOR_NAME) values (1,'Nestle Sofia Corp.');
Insert into SUPERMARKETS_CHAIN.VENDORS (ID,VENDOR_NAME) values (2,'Zagorka Corp.');
Insert into SUPERMARKETS_CHAIN.VENDORS (ID,VENDOR_NAME) values (3,'Targovishte Bottling Company Ltd.');
Insert into SUPERMARKETS_CHAIN.VENDORS (ID,VENDOR_NAME) values (4,'Devin JSC');
Insert into SUPERMARKETS_CHAIN.VENDORS (ID,VENDOR_NAME) values (5,'Coca-Cola HBC AG');
Insert into SUPERMARKETS_CHAIN.VENDORS (ID,VENDOR_NAME) values (6,'Lacrima OOD');
--------------------------------------------------------
--  DDL for Index VENDORS_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "SUPERMARKETS_CHAIN"."VENDORS_PK" ON "SUPERMARKETS_CHAIN"."VENDORS" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index MEASURES_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "SUPERMARKETS_CHAIN"."MEASURES_PK" ON "SUPERMARKETS_CHAIN"."MEASURES" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index PRODUCTS_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "SUPERMARKETS_CHAIN"."PRODUCTS_PK" ON "SUPERMARKETS_CHAIN"."PRODUCTS" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  Constraints for Table MEASURES
--------------------------------------------------------

  ALTER TABLE "SUPERMARKETS_CHAIN"."MEASURES" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "SUPERMARKETS_CHAIN"."MEASURES" MODIFY ("MEASURE_NAME" NOT NULL ENABLE);
  ALTER TABLE "SUPERMARKETS_CHAIN"."MEASURES" ADD CONSTRAINT "MEASURES_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table VENDORS
--------------------------------------------------------

  ALTER TABLE "SUPERMARKETS_CHAIN"."VENDORS" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "SUPERMARKETS_CHAIN"."VENDORS" MODIFY ("VENDOR_NAME" NOT NULL ENABLE);
  ALTER TABLE "SUPERMARKETS_CHAIN"."VENDORS" ADD CONSTRAINT "VENDORS_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table PRODUCTS
--------------------------------------------------------

  ALTER TABLE "SUPERMARKETS_CHAIN"."PRODUCTS" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "SUPERMARKETS_CHAIN"."PRODUCTS" MODIFY ("PRODUCT_NAME" NOT NULL ENABLE);
  ALTER TABLE "SUPERMARKETS_CHAIN"."PRODUCTS" ADD CONSTRAINT "PRODUCTS_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "SUPERMARKETS_CHAIN"."PRODUCTS" MODIFY ("VENDOR_ID" NOT NULL ENABLE);
  ALTER TABLE "SUPERMARKETS_CHAIN"."PRODUCTS" MODIFY ("MEASURE_ID" NOT NULL ENABLE);
  ALTER TABLE "SUPERMARKETS_CHAIN"."PRODUCTS" MODIFY ("PRICE" NOT NULL ENABLE);
--------------------------------------------------------
--  Ref Constraints for Table PRODUCTS
--------------------------------------------------------

  ALTER TABLE "SUPERMARKETS_CHAIN"."PRODUCTS" ADD CONSTRAINT "PRODUCTS_MEASURES_FK" FOREIGN KEY ("MEASURE_ID")
    REFERENCES "SUPERMARKETS_CHAIN"."MEASURES" ("ID") ENABLE;
  ALTER TABLE "SUPERMARKETS_CHAIN"."PRODUCTS" ADD CONSTRAINT "PRODUCTS_VENDORS_FK" FOREIGN KEY ("VENDOR_ID")
    REFERENCES "SUPERMARKETS_CHAIN"."VENDORS" ("ID") ENABLE;
--------------------------------------------------------
--  DDL for Trigger MEASURES_TRG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "SUPERMARKETS_CHAIN"."MEASURES_TRG" 
BEFORE INSERT ON MEASURES 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.ID IS NULL THEN
      SELECT MEASURES_SEQ.NEXTVAL INTO :NEW.ID FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "SUPERMARKETS_CHAIN"."MEASURES_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger PRODUCTS_TRG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "SUPERMARKETS_CHAIN"."PRODUCTS_TRG" 
BEFORE INSERT ON PRODUCTS 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    NULL;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "SUPERMARKETS_CHAIN"."PRODUCTS_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger PRODUCTS_TRG1
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "SUPERMARKETS_CHAIN"."PRODUCTS_TRG1" 
BEFORE INSERT ON PRODUCTS 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.ID IS NULL THEN
      SELECT PRODUCTS_SEQ1.NEXTVAL INTO :NEW.ID FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "SUPERMARKETS_CHAIN"."PRODUCTS_TRG1" ENABLE;
--------------------------------------------------------
--  DDL for Trigger VENDORS_TRG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "SUPERMARKETS_CHAIN"."VENDORS_TRG" 
BEFORE INSERT ON VENDORS 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.ID IS NULL THEN
      SELECT VENDORS_SEQ.NEXTVAL INTO :NEW.ID FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "SUPERMARKETS_CHAIN"."VENDORS_TRG" ENABLE;
